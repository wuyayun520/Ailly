
//: Declare String Begin

/*: "setPassword" :*/
fileprivate let str_centerCornerText:String = "if name age path livesetP"

/*: "user/appleLogin" :*/
fileprivate let str_buttonData:[Character] = ["u","s","e","r","/","a","p"]
fileprivate let str_centerValue:[Character] = ["p","l","e","L","o","g","i","n"]

/*: "user/smsLogin" :*/
fileprivate let str_managerModelValue:[Character] = ["u","s","e","r","/","s","m","s","L"]
fileprivate let str_cancelText:String = "ogiabove"

/*: "user/emailVcodeLogin" :*/
fileprivate let str_tableValue:String = "useprogress"
fileprivate let str_equalTitle:[Character] = ["l","V","c","o","d","e","L","o","g","i","n"]

/*: "user/pwdLogin" :*/
fileprivate let str_visualValue:String = "catch guard share label viewuser/"
fileprivate let str_pathName:String = "pwdLadd conversation shared let super"

/*: "user/emailPwdLogin" :*/
fileprivate let str_intimateValue:String = "usmake"
fileprivate let str_userData:String = "lPwdLequal self"

/*: "+ :*/
fileprivate let str_textTitle:String = "afterward"

/*: "mobile" :*/
fileprivate let str_iconLabData:[UInt8] = [0x65,0x6c,0x69,0x62,0x6f,0x6d]

/*: "areaCode" :*/
fileprivate let str_managerValue:[UInt8] = [0x81,0x92,0x85,0x81,0xa3,0x8f,0x84,0x85]

/*: "user/sendLoginSms" :*/
fileprivate let str_jumpValue:String = "user/if room my frame"
fileprivate let str_atData:[Character] = ["o","g","i","n","S","m","s"]

/*: "RSA加密失败" :*/
fileprivate let str_playerName:String = "view info gesture iRSA加密失败"

/*: "password" :*/
fileprivate let str_roomTitle:[UInt8] = [0x46,0x57,0x45,0x45,0x41,0x59,0x44,0x52]

private func naturalEvent(pic num: UInt8) -> UInt8 {
    return num ^ 54
}

/*: "vcode" :*/
fileprivate let str_layerName:[UInt8] = [0x28,0x15,0x21,0x16,0x17]

fileprivate func appBag(at num: UInt8) -> UInt8 {
    let value = Int(num) + 78
    if value > 255 {
        return UInt8(value - 256)
    } else {
        return UInt8(value)
    }
}

/*: "user/modifyPassword" :*/
fileprivate let str_modelValue:String = "user/moview var as equal"
fileprivate let str_videoConversionData:[Character] = ["d","i","f","y","P","a","s","s","w","o","r","d"]

/*: "user/sendModifyPwdSms" :*/
fileprivate let str_modelText:String = "ustitler"
fileprivate let str_extraViewValue:[Character] = ["o","d","i","f","y","P","w","d","S","m","s"]

/*: "user/sendModifyPwdEmail" :*/
fileprivate let str_equalName:String = "user/guard type link top para"
fileprivate let str_cameraLayerFrameContent:String = "ODIFY"
fileprivate let str_addText:String = "filteril"

/*: "mf/user/getMyInfo" :*/
fileprivate let str_constraintData:[Character] = ["m","f","/","u","s","e","r"]
fileprivate let str_kitTitle:String = "self self/g"
fileprivate let str_currentName:[Character] = ["e","t","M","y","I","n","f","o"]

/*: "invite/bindInviter" :*/
fileprivate let str_succeedTitle:[Character] = ["i","n","v","i","t","e","/","b","i"]
fileprivate let str_roomHistoryName:[Character] = ["n","d","I"]
fileprivate let str_labTitle:[Character] = ["n","v","i","t","e","r"]

/*: "mf/user/CheckInviteCode" :*/
fileprivate let str_kitValue:String = "mf/uequal image i return"
fileprivate let str_midText:String = "eckInpath send let"
fileprivate let str_appHeartTitle:[Character] = ["v","i","t","e","C","o","d","e"]

/*: "mf/user/updateInfo" :*/
fileprivate let str_textName:[Character] = ["m","f","/","u","s"]
fileprivate let str_contentName:String = "app pic add as extensioner/u"
fileprivate let str_labelValue:String = "equal clear path var iconInfo"

/*: "p0" :*/
fileprivate let str_callData:[Character] = ["p","0"]

/*: "email" :*/
fileprivate let str_errorData:[UInt8] = [0x6c,0x69,0x61,0x6d,0x65]

/*: "user/getEmailBindVCode" :*/
fileprivate let str_tableData:[Character] = ["u","s","e","r","/"]
fileprivate let str_centerContentText:String = "getEdata in float context else"
fileprivate let str_managerData:String = "button in viewindVCode"

/*: "user/sendLoginEmail" :*/
fileprivate let str_normalData:String = "case foruser/s"
fileprivate let str_playValue:String = "gift from frame else actualinEmail"

/*: "user/emailBind" :*/
fileprivate let str_targetText:String = "uconversatione"
fileprivate let str_sharedValue:[Character] = ["r","/","e","m","a","i","l","B","i","n","d"]

/*: "user/logout" :*/
fileprivate let str_effectTitle:[Character] = ["u","s","e","r","/","l"]
fileprivate let str_actionTitle:String = "topgtoput"

/*: "app/countryList" :*/
fileprivate let str_directionTitle:[Character] = ["a","p","p","/","c","o","u","n"]
fileprivate let str_panText:String = "tlocation"
fileprivate let str_modelContent:String = "yListnative view"

/*: "user/getMobileBindVCode" :*/
fileprivate let str_accountTitle:String = "user/gmodel info any color let"
fileprivate let str_errorTitle:String = "view var block raw varleBin"
fileprivate let str_collectionData:String = "container"

/*: "user/mobileBind" :*/
fileprivate let str_renderData:[Character] = ["u","s","e","r","/","m","o","b","i","l","e","B"]
fileprivate let str_assetData:String = "IND"

//: Declare String End

// __DEBUG__
// __CLOSE_PRINT__
//
//  LoginRequestTool.swift
//  AbroadTalking
//
//  Created by Hemming on 2022/8/29.
//

//: import UIKit
import UIKit

//: class TalkingLoginRequestTool: NSObject {
class LoginRequestTool: NSObject {
    /// 第三方登录请求
    /// - Parameters:
    ///   - type: 登录类型
    ///   - content: 未加密手机号/邮箱
    ///   - params: 参数
    ///   - completion: 回调

    //: class func req_thirdLogin(type: LoginType, content: String = "", params: [String: String], completion: @escaping FinishBlock) {
    class func act(type: VariantSchemaConvertible, content: String = "", params: [String: String], completion: @escaping FinishBlock) {
        //: let reqModel = self.req_thirdLoginModel(type: type, params: params)
        let reqModel = self.execute(type: type, params: params)
        //: GJ.startRequest(model: reqModel) { succeed, result, errorModel in
        kLet_nextTitle.photoLive(model: reqModel) { succeed, result, errorModel in
            //: guard succeed == true else {
            guard succeed == true else {
                //: completion(succeed, result, errorModel)
                completion(succeed, result, errorModel)
                //: return
                return
            }
            // 跳转设置密码页
            //: let json = JSON(result ?? [:])
            let json = JSON(result ?? [:])
            //: if json["setPassword"].boolValue == true {
            if json[(String(str_centerCornerText.suffix(4)) + "assword")].boolValue == true {
                //: completion(succeed, result, errorModel)
                completion(succeed, result, errorModel)
                //: EditTextThen.share.func__pushToSetNewPasswordVC(type: type, content: content, isNewPwd: true)
                EditTextThen.share.feelList(type: type, content: content, isNewPwd: true)
                //: return
                return
            }

            // 获取用户信息
            //: TalkingLoginRequestTool.req_LoginUserInfoData(type, completion: completion)
            LoginRequestTool.bar(type, completion: completion)
        }
    }

    /// 第三方登录请求模型
    /// - Parameters:
    ///   - type: 登录类型
    ///   - params: 参数
    /// - Returns: 请求模型
    //: private class func req_thirdLoginModel(type: LoginType, params: [String: String]) -> TalkingRequestModel {
    private class func execute(type: VariantSchemaConvertible, params: [String: String]) -> WithTitleThen {
        //: let reqModel = TalkingRequestModel.init()
        let reqModel = WithTitleThen()
        //: reqModel.requestType = .POST
        reqModel.requestType = .POST
        //: switch type {
        switch type {
        //: case .AppleLogin:
        case .AppleLogin:
            //: reqModel.requestPath = "user/appleLogin"
            reqModel.requestPath = (String(str_buttonData) + String(str_centerValue))
        //: case .PhoneLogin:
        case .PhoneLogin:
            //: reqModel.requestPath = "user/smsLogin"
            reqModel.requestPath = (String(str_managerModelValue) + str_cancelText.replacingOccurrences(of: "above", with: "n"))
        //: case .EmailLogin:
        case .EmailLogin:
            //: reqModel.requestPath = "user/emailVcodeLogin"
            reqModel.requestPath = (str_tableValue.replacingOccurrences(of: "progress", with: "r") + "/emai" + String(str_equalTitle))
        //: case .PwdPhoneLogin:
        case .PwdPhoneLogin:
            //: reqModel.requestPath = "user/pwdLogin"
            reqModel.requestPath = (String(str_visualValue.suffix(5)) + String(str_pathName.prefix(4)) + "ogin")
        //: case .PwdEmailLogin:
        case .PwdEmailLogin:
            //: reqModel.requestPath = "user/emailPwdLogin"
            reqModel.requestPath = (str_intimateValue.replacingOccurrences(of: "make", with: "er") + "/emai" + String(str_userData.prefix(5)) + "ogin")
        }
        //: reqModel.params = params
        reqModel.params = params

        //: return reqModel
        return reqModel
    }

    /// 获取验证码
    /// - Parameters:
    ///   - type: 登录类型
    ///   - params: 参数
    ///   - completion: 回调
    //: class func req_getPhoneCode( phoneStr: String, areaStr: String, completion: @escaping FinishBlock) {
    class func recordCompletion(phoneStr: String, areaStr: String, completion: @escaping FinishBlock) {
        //: var reslutStr = ""
        var reslutStr = ""
        //: var reslutCodeStr = ""
        var reslutCodeStr = ""
        //: do {
        do {
            //: let rsa_publicKey = try PublicKey(pemEncoded: LoginRsaPublicKey)
            let rsa_publicKey = try PublicKey(pemEncoded: kLet_transformText)
            //: let clear = try ClearMessage(string: phoneStr, using: .utf8)
            let clear = try ClearMessage(string: phoneStr, using: .utf8)
            //: reslutStr = try clear.encrypted(with: rsa_publicKey, padding: .PKCS1).base64String
            reslutStr = try clear.encrypted(with: rsa_publicKey, padding: .PKCS1).base64String

            //: let codeClear = try ClearMessage(string: "+\(areaStr)", using: .utf8)
            let codeClear = try ClearMessage(string: "+\(areaStr)", using: .utf8)
            //: reslutCodeStr = try codeClear.encrypted(with: rsa_publicKey, padding: .PKCS1).base64String
            reslutCodeStr = try codeClear.encrypted(with: rsa_publicKey, padding: .PKCS1).base64String

            //: let params = ["mobile": reslutStr, "areaCode": reslutCodeStr]
            let params = [String(bytes: str_iconLabData.reversed(), encoding: .utf8)!: reslutStr, String(bytes: str_managerValue.map{$0^224}, encoding: .utf8)!: reslutCodeStr]
            //: let reqModel = TalkingRequestModel.init()
            let reqModel = WithTitleThen()
            //: reqModel.requestType = .POST
            reqModel.requestType = .POST
            //: reqModel.requestPath = "user/sendLoginSms"
            reqModel.requestPath = (String(str_jumpValue.prefix(5)) + "sendL" + String(str_atData))
            //: reqModel.params = params
            reqModel.params = params
            //: GJ.startRequest(model: reqModel) { succeed, result, errorModel in
            kLet_nextTitle.photoLive(model: reqModel) { succeed, result, errorModel in
                //: completion(succeed, result, errorModel)
                completion(succeed, result, errorModel)
            }

            //: } catch {
        } catch {
            //: printLog(message: "RSA加密失败")
            printLog(message: (String(str_playerName.suffix(7))))
        }
    }

    /// 密码登录
    /// - Parameters:
    ///   - phoneStr: 手机号登录
    ///   - areaStr: 区号
    ///   - pwd: 密码
    ///   - completion: 回调
    //: class func req_passwordLogin(phoneStr: String, areaStr: String, pwd: String, completion: @escaping FinishBlock) {
    class func up(phoneStr: String, areaStr: String, pwd: String, completion: @escaping FinishBlock) {
        //: var resultPhoneStr = ""
        var resultPhoneStr = ""
        //: var resultCodeStr = ""
        var resultCodeStr = ""
        //: var resultPwdStr = ""
        var resultPwdStr = ""
        //: do {
        do {
            //: let rsa_publicKey = try PublicKey(pemEncoded: LoginRsaPublicKey)
            let rsa_publicKey = try PublicKey(pemEncoded: kLet_transformText)
            //: let clear = try ClearMessage(string: phoneStr, using: .utf8)
            let clear = try ClearMessage(string: phoneStr, using: .utf8)
            //: resultPhoneStr = try clear.encrypted(with: rsa_publicKey, padding: .PKCS1).base64String
            resultPhoneStr = try clear.encrypted(with: rsa_publicKey, padding: .PKCS1).base64String

            //: let codeClear = try ClearMessage(string: "+\(areaStr)", using: .utf8)
            let codeClear = try ClearMessage(string: "+\(areaStr)", using: .utf8)
            //: resultCodeStr = try codeClear.encrypted(with: rsa_publicKey, padding: .PKCS1).base64String
            resultCodeStr = try codeClear.encrypted(with: rsa_publicKey, padding: .PKCS1).base64String

            //: let pwdClear = try ClearMessage(string: "\(pwd)", using: .utf8)
            let pwdClear = try ClearMessage(string: "\(pwd)", using: .utf8)
            //: resultPwdStr = try pwdClear.encrypted(with: rsa_publicKey, padding: .PKCS1).base64String
            resultPwdStr = try pwdClear.encrypted(with: rsa_publicKey, padding: .PKCS1).base64String

            //: let params = ["mobile": resultPhoneStr, "areaCode": resultCodeStr, "password": resultPwdStr]
            let params = [String(bytes: str_iconLabData.reversed(), encoding: .utf8)!: resultPhoneStr, String(bytes: str_managerValue.map{$0^224}, encoding: .utf8)!: resultCodeStr, String(bytes: str_roomTitle.map{BotanicBreeze.naturalEvent(pic: $0)}, encoding: .utf8)!: resultPwdStr]
            //: TalkingLoginRequestTool.req_thirdLogin(type: .PwdPhoneLogin, params: params, completion: completion)
            LoginRequestTool.act(type: .PwdPhoneLogin, params: params, completion: completion)
            //: } catch {
        } catch {
            //: printLog(message: "RSA加密失败")
            printLog(message: (String(str_playerName.suffix(7))))
        }
    }

    /// 修改密码
    /// - Parameters:
    ///   - pwd: 密码
    ///   - vcode: 验证码
    ///   - completion: 回调
    //: class func req_modifyPassword(pwd: String, vcode: String?, completion: @escaping FinishBlock) {
    class func pan(pwd: String, vcode: String?, completion: @escaping FinishBlock) {
        //: var resultPwdStr = ""
        var resultPwdStr = ""
        //: do {
        do {
            //: let rsa_publicKey = try PublicKey(pemEncoded: LoginRsaPublicKey)
            let rsa_publicKey = try PublicKey(pemEncoded: kLet_transformText)
            //: let pwdClear = try ClearMessage(string: "\(pwd)", using: .utf8)
            let pwdClear = try ClearMessage(string: "\(pwd)", using: .utf8)
            //: resultPwdStr = try pwdClear.encrypted(with: rsa_publicKey, padding: .PKCS1).base64String
            resultPwdStr = try pwdClear.encrypted(with: rsa_publicKey, padding: .PKCS1).base64String
            //: var params = ["password": resultPwdStr]
            var params = [String(bytes: str_roomTitle.map{BotanicBreeze.naturalEvent(pic: $0)}, encoding: .utf8)!: resultPwdStr]

            //: if vcode?.count ?? 0 > 0 {
            if vcode?.count ?? 0 > 0 {
                //: params["vcode"] = vcode
                params[String(bytes: str_layerName.map{appBag(at: $0)}, encoding: .utf8)!] = vcode
            }

            //: let reqModel = TalkingRequestModel()
            let reqModel = WithTitleThen()
            //: reqModel.requestType = .POST
            reqModel.requestType = .POST
            //: reqModel.requestPath = "user/modifyPassword"
            reqModel.requestPath = (String(str_modelValue.prefix(7)) + String(str_videoConversionData))
            //: reqModel.params = params
            reqModel.params = params
            //: GJ.startRequest(model: reqModel) { succeed, result, errorModel in
            kLet_nextTitle.photoLive(model: reqModel) { succeed, result, errorModel in
                //: completion(succeed, result, errorModel)
                completion(succeed, result, errorModel)
            }

            //: } catch {
        } catch {
            //: printLog(message: "RSA加密失败")
            printLog(message: (String(str_playerName.suffix(7))))
        }
    }

    /// 获取修改【手机号】密码验证码
    /// - Parameter completion: 回调
    //: class func req_sendModifyPwdSms(completion: @escaping FinishBlock) {
    class func build(completion: @escaping FinishBlock) {
        //: let reqModel = TalkingRequestModel()
        let reqModel = WithTitleThen()
        //: reqModel.requestType = .GET
        reqModel.requestType = .GET
        //: reqModel.requestPath = "user/sendModifyPwdSms"
        reqModel.requestPath = (str_modelText.replacingOccurrences(of: "title", with: "e") + "/sendM" + String(str_extraViewValue))
        //: GJ.startRequest(model: reqModel) { succeed, result, errorModel in
        kLet_nextTitle.photoLive(model: reqModel) { succeed, result, errorModel in
            //: completion(succeed, result, errorModel)
            completion(succeed, result, errorModel)
        }
    }

    /// 获取修改【邮箱】密码验证码
    /// - Parameter completion: 回调
    //: class func req_sendModifyPwdEmail(completion: @escaping FinishBlock) {
    class func change(completion: @escaping FinishBlock) {
        //: let reqModel = TalkingRequestModel()
        let reqModel = WithTitleThen()
        //: reqModel.requestType = .GET
        reqModel.requestType = .GET
        //: reqModel.requestPath = "user/sendModifyPwdEmail"
        reqModel.requestPath = (String(str_equalName.prefix(5)) + "sendM" + str_cameraLayerFrameContent.lowercased() + "PwdE" + str_addText.replacingOccurrences(of: "filter", with: "ma"))
        //: GJ.startRequest(model: reqModel) { succeed, result, errorModel in
        kLet_nextTitle.photoLive(model: reqModel) { succeed, result, errorModel in
            //: completion(succeed, result, errorModel)
            completion(succeed, result, errorModel)
        }
    }

    /// 获取用户信息接口
    /// - Parameters:
    ///   - type: 登录类型
    ///   - params: 参数
    ///   - completion: 回调
    //: class func req_LoginUserInfoData(_ type: LoginType, completion: FinishBlock? = nil) {
    class func bar(_ type: VariantSchemaConvertible, completion: FinishBlock? = nil) {
        //: let reqModel = TalkingRequestModel.init()
        let reqModel = WithTitleThen()
        //: reqModel.requestPath = "mf/user/getMyInfo"
        reqModel.requestPath = (String(str_constraintData) + String(str_kitTitle.suffix(2)) + String(str_currentName))
        //: GJ.startRequest(model: reqModel) { succeed, result, errorModel in
        kLet_nextTitle.photoLive(model: reqModel) { succeed, result, errorModel in
            //: guard succeed == true else {
            guard succeed == true else {
                //: completion?(succeed, result, errorModel)
                completion?(succeed, result, errorModel)
                //: return
                return
            }
            //: Defaults.set(result, forKey: TalkingLoginUserInfoCacheKey)
            kLet_turnPartyValue.set(result, forKey: kLet_buildText)
            //: if let userModel = JSONDeserializer<LoginUserModel>.deserializeFrom(dict: result as? Dictionary<String, Any>, designatedPath: nil) {
            if let userModel = JSONDeserializer<RunUserModel>.deserializeFrom(dict: result as? [String: Any], designatedPath: nil) {
                //: EqualThen.share.loginUserMode = userModel
                EqualThen.share.loginUserMode = userModel

                // 记录上次登录类型
                //: Defaults.set(type.rawValue, forKey: TalkingLastLoginTypeCacheKey)
                kLet_turnPartyValue.set(type.rawValue, forKey: kLet_countData)
                //: if EqualThen.share.loginUserMode.updateInfo == false {
                if EqualThen.share.loginUserMode.updateInfo == false { // 需要完善资料
                    //: completion?(false, nil, errorModel)
                    completion?(false, nil, errorModel)
                    //: EditTextThen.share.func__pushToFillUserInfoVC()
                    EditTextThen.share.refill()
                    //: return
                    return
                }

                //: completion?(succeed, result, errorModel)
                completion?(succeed, result, errorModel)
                //: NotificationCenter.default.post(name: DID_LOGIN_SUCCESS_NOTIFICATION, object: nil, userInfo: result as! Dictionary<String, Any>)
                NotificationCenter.default.post(name: kLet_popText, object: nil, userInfo: result as! [String: Any])

                //: if EqualThen.share.loginUserMode.remindBindEmail == true {
                if EqualThen.share.loginUserMode.remindBindEmail == true { // 需要绑定邮箱
                    //: DispatchQueue.main.asyncAfter(deadline: .now()+0.5) {
                    DispatchQueue.main.asyncAfter(deadline: .now() + 0.5) {
                        //: EditTextThen.share.func__pushToLockUserEmailVC(isShowBack: false)
                        EditTextThen.share.actionTo(isShowBack: false)
                    }
                }
            }
        }
    }

    /// 绑定邀请邀请码
    /// - Parameters:
    ///   - params: 邀请码
    ///   - completion: 回调
    //: class func req_inviteBindInviter(params: [String: String], completion: @escaping FinishBlock) {
    class func bindStatusLocationInviterRaise(params: [String: String], completion: @escaping FinishBlock) {
        //: let reqModel = TalkingRequestModel.init()
        let reqModel = WithTitleThen()
        //: reqModel.requestPath = "invite/bindInviter"
        reqModel.requestPath = (String(str_succeedTitle) + String(str_roomHistoryName) + String(str_labTitle))
        //: reqModel.params = params
        reqModel.params = params
        //: GJ.startRequest(model: reqModel) { succeed, result, errorModel in
        kLet_nextTitle.photoLive(model: reqModel) { succeed, result, errorModel in
            //: completion(succeed, result, errorModel)
            completion(succeed, result, errorModel)
        }
    }

    /// 检测邀请码
    /// - Parameters:
    ///   - params: 参数
    ///   - completion: 回调
    //: class func req_CheckCodeData(params: [String: String], completion: @escaping FinishBlock) {
    class func naturalEvent(params: [String: String], completion: @escaping FinishBlock) {
        //: let reqModel = TalkingRequestModel.init()
        let reqModel = WithTitleThen()
        //: reqModel.requestPath = "mf/user/CheckInviteCode"
        reqModel.requestPath = (String(str_kitValue.prefix(4)) + "ser/Ch" + String(str_midText.prefix(5)) + String(str_appHeartTitle))
        //: reqModel.requestType = .POST
        reqModel.requestType = .POST
        //: reqModel.params = params
        reqModel.params = params
        //: GJ.startRequest(model: reqModel) { succeed, result, errorModel in
        kLet_nextTitle.photoLive(model: reqModel) { succeed, result, errorModel in
            //: completion(succeed, result, errorModel)
            completion(succeed, result, errorModel)
        }
    }

    /// 更新用户信息
    /// - Parameters:
    ///   - type: 登录类型
    ///   - params: 参数
    ///   - completion: 回调
    //: class func req_updateUserInfo(params: [String: Any], completion: @escaping FinishBlock) {
    class func user(params: [String: Any], completion: @escaping FinishBlock) {
        //: let reqModel = TalkingRequestModel.init()
        let reqModel = WithTitleThen()
        //: reqModel.requestPath = "mf/user/updateInfo"
        reqModel.requestPath = (String(str_textName) + String(str_contentName.suffix(4)) + "pdate" + String(str_labelValue.suffix(4)))
        //: var temparams = params
        var temparams = params
        //: temparams += UIDevice.deviceInfoDic
        temparams += UIDevice.deviceInfoDic
        //: if let poStr = temparams["p0"] {
        if let poStr = temparams["p0"] {
            //: let token = NSDate.getCurrentTimeStamp()
            let token = NSDate.pushFinish()
            //: reqModel.addHeaderToken = token
            reqModel.addHeaderToken = token
            //: let key = token.appending(TokenSaltStr)
            let key = token.appending(kLet_topValue)
            //: temparams["p0"] = (poStr as? String)?.encrypt(withKey: key)
            temparams["p0"] = (poStr as? String)?.lengthGallery(key)
        }
        //: reqModel.params = temparams
        reqModel.params = temparams
        //: reqModel.requestType = .POST
        reqModel.requestType = .POST
        //: GJ.startRequest(model: reqModel) { succeed, result, errorModel in
        kLet_nextTitle.photoLive(model: reqModel) { succeed, result, errorModel in
            //: completion(succeed, result, errorModel)
            completion(succeed, result, errorModel)
        }
    }

    /// Email Code
    /// - Parameters:
    ///   - emailStr: Email
    ///   - emailType: Login or Bind
    //: class func req_getBindEmailCode( emailStr: String, isBind: Bool, completion: @escaping FinishBlock) {
    class func at(emailStr: String, isBind: Bool, completion: @escaping FinishBlock) {
        //: var reslutStr = ""
        var reslutStr = ""
        //: do {
        do {
            //: let rsa_publicKey = try PublicKey(pemEncoded: LoginRsaPublicKey)
            let rsa_publicKey = try PublicKey(pemEncoded: kLet_transformText)
            //: let clear = try ClearMessage(string: emailStr, using: .utf8)
            let clear = try ClearMessage(string: emailStr, using: .utf8)
            //: reslutStr = try clear.encrypted(with: rsa_publicKey, padding: .PKCS1).base64String
            reslutStr = try clear.encrypted(with: rsa_publicKey, padding: .PKCS1).base64String
            //: let params = ["email": reslutStr]
            let params = [String(bytes: str_errorData.reversed(), encoding: .utf8)!: reslutStr]
            //: let reqModel = TalkingRequestModel.init()
            let reqModel = WithTitleThen()
            //: reqModel.requestType = .POST
            reqModel.requestType = .POST
            //: if isBind {
            if isBind {
                //: reqModel.requestPath = "user/getEmailBindVCode"
                reqModel.requestPath = (String(str_tableData) + String(str_centerContentText.prefix(4)) + "mailB" + String(str_managerData.suffix(8)))
                //: } else {
            } else {
                //: reqModel.requestPath = "user/sendLoginEmail"
                reqModel.requestPath = (String(str_normalData.suffix(6)) + "endLog" + String(str_playValue.suffix(7)))
            }
            //: reqModel.params = params
            reqModel.params = params
            //: GJ.startRequest(model: reqModel) { succeed, result, errorModel in
            kLet_nextTitle.photoLive(model: reqModel) { succeed, result, errorModel in
                //: completion(succeed, result, errorModel)
                completion(succeed, result, errorModel)
            }

            //: } catch {
        } catch {
            //: printLog(message: "RSA加密失败")
            printLog(message: (String(str_playerName.suffix(7))))
        }
    }

    /// 绑定邮箱验证码
    /// - Parameters:
    ///   - completion: 回调
    //: class func req_bindEmailCode( emailCode: String, completion: @escaping FinishBlock) {
    class func video(emailCode: String, completion: @escaping FinishBlock) {
        //: let reqModel = TalkingRequestModel.init()
        let reqModel = WithTitleThen()
        //: reqModel.requestType = .POST
        reqModel.requestType = .POST
        //: reqModel.requestPath = "user/emailBind"
        reqModel.requestPath = (str_targetText.replacingOccurrences(of: "conversation", with: "s") + String(str_sharedValue))
        //: reqModel.params = ["vcode": emailCode]
        reqModel.params = [String(bytes: str_layerName.map{appBag(at: $0)}, encoding: .utf8)!: emailCode]
        //: GJ.startRequest(model: reqModel) { succeed, result, errorModel in
        kLet_nextTitle.photoLive(model: reqModel) { succeed, result, errorModel in
            //: completion(succeed, result, errorModel)
            completion(succeed, result, errorModel)
        }
    }

    //: class func req_passwordEmailLogin(emailStr: String, pwd: String, completion: @escaping FinishBlock) {
    class func location(emailStr: String, pwd: String, completion: @escaping FinishBlock) {
        //: var resultEmailStr = ""
        var resultEmailStr = ""
        //: var resultPwdStr = ""
        var resultPwdStr = ""
        //: do {
        do {
            //: let rsa_publicKey = try PublicKey(pemEncoded: LoginRsaPublicKey)
            let rsa_publicKey = try PublicKey(pemEncoded: kLet_transformText)
            //: let clear = try ClearMessage(string: emailStr, using: .utf8)
            let clear = try ClearMessage(string: emailStr, using: .utf8)
            //: resultEmailStr = try clear.encrypted(with: rsa_publicKey, padding: .PKCS1).base64String
            resultEmailStr = try clear.encrypted(with: rsa_publicKey, padding: .PKCS1).base64String

            //: let pwdClear = try ClearMessage(string: "\(pwd)", using: .utf8)
            let pwdClear = try ClearMessage(string: "\(pwd)", using: .utf8)
            //: resultPwdStr = try pwdClear.encrypted(with: rsa_publicKey, padding: .PKCS1).base64String
            resultPwdStr = try pwdClear.encrypted(with: rsa_publicKey, padding: .PKCS1).base64String

            //: let params = ["email": resultEmailStr, "password": resultPwdStr]
            let params = [String(bytes: str_errorData.reversed(), encoding: .utf8)!: resultEmailStr, String(bytes: str_roomTitle.map{BotanicBreeze.naturalEvent(pic: $0)}, encoding: .utf8)!: resultPwdStr]
            //: TalkingLoginRequestTool.req_thirdLogin(type: .PwdEmailLogin, params: params, completion: completion)
            LoginRequestTool.act(type: .PwdEmailLogin, params: params, completion: completion)
            //: } catch {
        } catch {
            //: printLog(message: "RSA加密失败")
            printLog(message: (String(str_playerName.suffix(7))))
        }
    }

    //: typealias RequestLoginOutBlock = (_ t: Bool) -> Void
    typealias RequestLoginOutBlock = (_ t: Bool) -> Void

    //: @objc class func req_loginOut(completion: @escaping RequestLoginOutBlock) {
    @objc class func atCompletion(completion: @escaping RequestLoginOutBlock) {
        //: let reqModel = TalkingRequestModel.init()
        let reqModel = WithTitleThen()
        //: reqModel.requestPath = "user/logout"
        reqModel.requestPath = (String(str_effectTitle) + str_actionTitle.replacingOccurrences(of: "top", with: "o"))
        //: GJ.startRequest(model: reqModel) { succeed, result, errorModel in
        kLet_nextTitle.photoLive(model: reqModel) { succeed, _, _ in
            //: completion(succeed)
            completion(succeed)
        }
    }

    //: @objc class func func__requestReloginUserInfo(completion: @escaping RequestLoginOutBlock) {
    @objc class func info(completion: @escaping RequestLoginOutBlock) {
        //: let reqModel = TalkingRequestModel.init()
        let reqModel = WithTitleThen()
        //: reqModel.requestPath = "mf/user/getMyInfo"
        reqModel.requestPath = (String(str_constraintData) + String(str_kitTitle.suffix(2)) + String(str_currentName))
        //: GJ.startRequest(model: reqModel) { succeed, result, errorModel in
        kLet_nextTitle.photoLive(model: reqModel) { succeed, result, _ in
            //: if succeed {
            if succeed {
                //: Defaults.set(result, forKey: TalkingLoginUserInfoCacheKey)
                kLet_turnPartyValue.set(result, forKey: kLet_buildText)
                //: if let userModel = JSONDeserializer<LoginUserModel>.deserializeFrom(dict: result as? Dictionary<String, Any>, designatedPath: nil) {
                if let userModel = JSONDeserializer<RunUserModel>.deserializeFrom(dict: result as? [String: Any], designatedPath: nil) {
                    //: EqualThen.share.loginUserMode = userModel
                    EqualThen.share.loginUserMode = userModel
                }
            }
            //: completion(succeed)
            completion(succeed)
        }
    }

    /// 获取允许国家列表
    /// - Parameters:
    ///   - completion: 回调
    //: class func req_countryList( completion: @escaping FinishBlock) {
    class func model(completion: @escaping FinishBlock) {
        //: let reqModel = TalkingRequestModel.init()
        let reqModel = WithTitleThen()
        //: reqModel.requestPath = "app/countryList"
        reqModel.requestPath = (String(str_directionTitle) + str_panText.replacingOccurrences(of: "location", with: "r") + String(str_modelContent.prefix(5)))
        //: GJ.startRequest(model: reqModel) { succeed, result, errorModel in
        kLet_nextTitle.photoLive(model: reqModel) { succeed, result, errorModel in
            //: completion(succeed, result, errorModel)
            completion(succeed, result, errorModel)
        }
    }

    /// 绑定手机号获取验证码
    //: class func req_bindPhoneGetCode( phoneStr: String, areaStr: String, completion: @escaping FinishBlock) {
    class func top(phoneStr: String, areaStr: String, completion: @escaping FinishBlock) {
        //: var reslutStr = ""
        var reslutStr = ""
        //: var reslutCodeStr = ""
        var reslutCodeStr = ""
        //: do {
        do {
            //: let rsa_publicKey = try PublicKey(pemEncoded: LoginRsaPublicKey)
            let rsa_publicKey = try PublicKey(pemEncoded: kLet_transformText)
            //: let clear = try ClearMessage(string: phoneStr, using: .utf8)
            let clear = try ClearMessage(string: phoneStr, using: .utf8)
            //: reslutStr = try clear.encrypted(with: rsa_publicKey, padding: .PKCS1).base64String
            reslutStr = try clear.encrypted(with: rsa_publicKey, padding: .PKCS1).base64String

            //: let codeClear = try ClearMessage(string: "+\(areaStr)", using: .utf8)
            let codeClear = try ClearMessage(string: "+\(areaStr)", using: .utf8)
            //: reslutCodeStr = try codeClear.encrypted(with: rsa_publicKey, padding: .PKCS1).base64String
            reslutCodeStr = try codeClear.encrypted(with: rsa_publicKey, padding: .PKCS1).base64String

            //: let params = ["mobile": reslutStr, "areaCode": reslutCodeStr]
            let params = [String(bytes: str_iconLabData.reversed(), encoding: .utf8)!: reslutStr, String(bytes: str_managerValue.map{$0^224}, encoding: .utf8)!: reslutCodeStr]
            //: let reqModel = TalkingRequestModel.init()
            let reqModel = WithTitleThen()
            //: reqModel.requestType = .POST
            reqModel.requestType = .POST
            //: reqModel.requestPath = "user/getMobileBindVCode"
            reqModel.requestPath = (String(str_accountTitle.prefix(6)) + "etMobi" + String(str_errorTitle.suffix(5)) + "dVCod" + str_collectionData.replacingOccurrences(of: "container", with: "e"))
            //: reqModel.params = params
            reqModel.params = params
            //: GJ.startRequest(model: reqModel) { succeed, result, errorModel in
            kLet_nextTitle.photoLive(model: reqModel) { succeed, result, errorModel in
                //: completion(succeed, result, errorModel)
                completion(succeed, result, errorModel)
            }

            //: } catch {
        } catch {
            //: printLog(message: "RSA加密失败")
            printLog(message: (String(str_playerName.suffix(7))))
        }
    }

    /// 绑定手机号
    //: class func req_MobileBind(phoneStr: String, areaStr: String, vcode: String, completion: @escaping FinishBlock) {
    class func make(phoneStr: String, areaStr: String, vcode: String, completion: @escaping FinishBlock) {
        //: var reslutStr = ""
        var reslutStr = ""
        //: var reslutCodeStr = ""
        var reslutCodeStr = ""
        //: do {
        do {
            //: let rsa_publicKey = try PublicKey(pemEncoded: LoginRsaPublicKey)
            let rsa_publicKey = try PublicKey(pemEncoded: kLet_transformText)
            //: let clear = try ClearMessage(string: phoneStr, using: .utf8)
            let clear = try ClearMessage(string: phoneStr, using: .utf8)
            //: reslutStr = try clear.encrypted(with: rsa_publicKey, padding: .PKCS1).base64String
            reslutStr = try clear.encrypted(with: rsa_publicKey, padding: .PKCS1).base64String

            //: let codeClear = try ClearMessage(string: "+\(areaStr)", using: .utf8)
            let codeClear = try ClearMessage(string: "+\(areaStr)", using: .utf8)
            //: reslutCodeStr = try codeClear.encrypted(with: rsa_publicKey, padding: .PKCS1).base64String
            reslutCodeStr = try codeClear.encrypted(with: rsa_publicKey, padding: .PKCS1).base64String

            //: let params = ["mobile": reslutStr, "areaCode": reslutCodeStr, "vcode": vcode]
            let params = [String(bytes: str_iconLabData.reversed(), encoding: .utf8)!: reslutStr, String(bytes: str_managerValue.map{$0^224}, encoding: .utf8)!: reslutCodeStr, String(bytes: str_layerName.map{appBag(at: $0)}, encoding: .utf8)!: vcode]
            //: let reqModel = TalkingRequestModel.init()
            let reqModel = WithTitleThen()
            //: reqModel.requestType = .POST
            reqModel.requestType = .POST
            //: reqModel.requestPath = "user/mobileBind"
            reqModel.requestPath = (String(str_renderData) + str_assetData.lowercased())
            //: reqModel.params = params
            reqModel.params = params
            //: GJ.startRequest(model: reqModel) { succeed, result, errorModel in
            kLet_nextTitle.photoLive(model: reqModel) { succeed, result, errorModel in
                //: completion(succeed, result, errorModel)
                completion(succeed, result, errorModel)
            }

            //: } catch {
        } catch {
            //: printLog(message: "RSA加密失败")
            printLog(message: (String(str_playerName.suffix(7))))
        }
    }
}
